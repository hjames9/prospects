var UUID=(function(){var a={};var c=[];for(var b=0;b<256;b++){c[b]=(b<16?"0":"")+(b).toString(16)}a.generate=function(){var g=Math.random()*4294967295|0;var f=Math.random()*4294967295|0;var e=Math.random()*4294967295|0;var d=Math.random()*4294967295|0;return c[g&255]+c[g>>8&255]+c[g>>16&255]+c[g>>24&255]+"-"+c[f&255]+c[f>>8&255]+"-"+c[f>>16&15|64]+c[f>>24&255]+"-"+c[e&63|128]+c[e>>8&255]+"-"+c[e>>16&255]+c[e>>24&255]+c[d&255]+c[d>>8&255]+c[d>>16&255]+c[d>>24&255]};return a})();function NotEmpty(a){return typeof a==="string"&&a.length>0}function IsBoolean(a){return typeof a==="boolean"}function IsBooleanTrue(a){return IsBoolean(a)&&a}function getParameterFromNvp(a,b){return a+"="+encodeURIComponent(b)+"&"}function isBetween(c,b,a){return(c>=b&&c<=a)}function isInformational(a){return isBetween(a,100,199)}function isSuccess(a){return isBetween(a,200,299)}function isRedirection(a){return isBetween(a,300,399)}function isClientError(a){return isBetween(a,400,499)}function isServerError(a){return isBetween(a,500,599)}function isError(a){return isClientError(a)||isServerError(a)}function Prospect(){this.uuid=this.getUUID();this.adhocFields={};this.adhocHeaders={};this.leadSource="landing"}Prospect.prototype.getUUID=function(){var b=window.localStorage;var a=b.getItem("uuid");if(null==a){a=UUID.generate();b.setItem("uuid",a)}return a};Prospect.prototype.setUrl=function(a){this.url=a};Prospect.prototype.getUrl=function(){return this.url};Prospect.prototype.setAppName=function(a){this.appName=a};Prospect.prototype.getAppName=function(){return this.appName};Prospect.prototype.getLeadSource=function(){return this.leadSource};Prospect.prototype.setLeadSource=function(a){this.leadSource=a};Prospect.prototype.setEmail=function(a){this.email=a};Prospect.prototype.getEmail=function(){return this.email};Prospect.prototype.setPinterest=function(a){if(a){this.leadSource="pinterest"}};Prospect.prototype.getPinterest=function(){return this.leadSource=="pinterest"};Prospect.prototype.setFacebook=function(a){if(a){this.leadSource="facebook"}};Prospect.prototype.getFacebook=function(){return this.leadSource=="facebook"};Prospect.prototype.setInstagram=function(a){if(a){this.leadSource="instagram"}};Prospect.prototype.getInstagram=function(){return this.leadSource=="instagram"};Prospect.prototype.setTwitter=function(a){if(a){this.leadSource="twitter"}};Prospect.prototype.getTwitter=function(){return this.leadSource=="twitter"};Prospect.prototype.setGoogle=function(a){if(a){this.leadSource="google"}};Prospect.prototype.getGoogle=function(){return this.leadSource=="google"};Prospect.prototype.setSnapchat=function(a){if(a){this.leadSource="snapchat"}};Prospect.prototype.getSnapchat=function(){return this.leadSource=="snapchat"};Prospect.prototype.setYoutube=function(a){if(a){this.leadSource="youtube"}};Prospect.prototype.getYoutube=function(){return this.leadSource=="youtube"};Prospect.prototype.setExtended=function(a){if(a){this.leadSource="extended"}};Prospect.prototype.getExtended=function(){return this.leadSource=="extended"};Prospect.prototype.setFeedback=function(a){this.feedback=a;this.leadSource="feedback"};Prospect.prototype.getFeedback=function(){return this.feedback};Prospect.prototype.setPageReferrer=function(a){this.pageReferrer=a};Prospect.prototype.getPageReferrer=function(){return this.pageReferrer};Prospect.prototype.setFirstName=function(a){this.firstName=a};Prospect.prototype.getFirstName=function(){return this.firstName};Prospect.prototype.setLastName=function(a){this.lastName=a};Prospect.prototype.getLastName=function(){return this.lastName};Prospect.prototype.setPhoneNumber=function(a){this.phoneNumber=a};Prospect.prototype.getPhoneNumber=function(){return this.phoneNumber};Prospect.prototype.setDateOfBirth=function(a){this.dateOfBirth=a};Prospect.prototype.getDateOfBirth=function(){return this.dateOfBirth};Prospect.prototype.setGender=function(a){this.gender=a};Prospect.prototype.getGender=function(){return this.gender};Prospect.prototype.setZipCode=function(a){this.zipCode=a};Prospect.prototype.getZipCode=function(){return this.zipCode};Prospect.prototype.setLanguage=function(a){this.language=a};Prospect.prototype.getLanguage=function(){return this.language};Prospect.prototype.setLatitude=function(a){this.latitude=a};Prospect.prototype.getLatitude=function(){return this.latitude};Prospect.prototype.setLongitude=function(a){this.longitude=a};Prospect.prototype.getLongitude=function(){return this.longitude};Prospect.prototype.setMiscellaneous=function(a){this.miscellaneous=a};Prospect.prototype.getMiscellaneous=function(){return this.miscellaneous};Prospect.prototype.addAdhocField=function(a,b){this.adhocFields[a]=b};Prospect.prototype.getAdhocFields=function(){return this.adhocFields};Prospect.prototype.addAdhocHeader=function(a,b){this.adhocHeaders[a]=b};Prospect.prototype.getAdhocHeaders=function(){return this.adhocHeaders};Prospect.prototype.ready=function(){return NotEmpty(this.url)&&NotEmpty(this.uuid)&&NotEmpty(this.appName)&&((this.leadSource=="landing"&&(NotEmpty(this.email)||NotEmpty(this.phoneNumber)))||(this.leadSource=="email"&&NotEmpty(this.email))||(this.leadSource=="phone"&&NotEmpty(this.phoneNumber))||(this.leadSource=="feedback"&&NotEmpty(this.feedback))||this.leadSource=="extended"||this.leadSource=="pinterest"||this.leadSource=="facebook"||this.leadSource=="instagram"||this.leadSource=="twitter"||this.leadSource=="google"||this.leadSource=="snapchat"||this.leadSource=="youtube")};Prospect.prototype.save=function(g,j){if(!this.ready()){throw new Error("Prospect has missing required fields")}var d=new XMLHttpRequest();var a=(null!=g||null!=j);var e=this;d.onload=function(k){if(null!=g&&isSuccess(d.status)){g(JSON.parse(d.responseText),d.status,e)}else{if(null!=j&&isError(d.status)){j(JSON.parse(d.responseText),d.status,e)}}};d.onerror=function(l){if(null!=j){if(0!=d.status){j(JSON.parse(d.responseText),d.status,e)}else{var k={code:503,code_message:"Service unavailable",message:l.error};j(k,k.code,e)}}};var c=getParameterFromNvp("leadid",this.uuid);c+=getParameterFromNvp("appname",this.appName);if(NotEmpty(this.email)){c+=getParameterFromNvp("email",this.email)}if(NotEmpty(this.leadSource)){c+=getParameterFromNvp("leadsource",this.leadSource)}if(NotEmpty(this.firstName)){c+=getParameterFromNvp("firstname",this.firstName)}if(NotEmpty(this.lastName)){c+=getParameterFromNvp("lastname",this.lastName)}if(NotEmpty(this.feedback)){c+=getParameterFromNvp("feedback",this.feedback)}if(NotEmpty(this.phoneNumber)){c+=getParameterFromNvp("phonenumber",this.phoneNumber)}if(NotEmpty(this.dateOfBirth)){var h=new Date(this.dateOfBirth).toISOString();c+=getParameterFromNvp("dob",h)}if(NotEmpty(this.gender)){c+=getParameterFromNvp("gender",this.gender)}if(NotEmpty(this.zipcode)){c+=getParameterFromNvp("zipcode",this.zipcode)}if(NotEmpty(this.language)){c+=getParameterFromNvp("language",this.language)}else{if(navigator.language){c+=getParameterFromNvp("language",navigator.language)}}if(NotEmpty(this.pageReferrer)){c+=getParameterFromNvp("pagereferrer",this.pageReferrer)}else{if(document.referrer){c+=getParameterFromNvp("pagereferrer",document.referrer)}}if(NotEmpty(this.latitude)){c+=getParameterFromNvp("latitude",this.latitude)}if(NotEmpty(this.longitude)){c+=getParameterFromNvp("longitude",this.longitude)}if(NotEmpty(this.miscellaneous)){c+=getParameterFromNvp("miscellaneous",this.miscellaneous)}for(var i in this.adhocFields){if(this.adhocFields.hasOwnProperty(i)){c+=getParameterFromNvp(i,this.adhocFields[i])}}try{d.open("POST",this.url,a);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var i in this.adhocHeaders){if(this.adhocHeaders.hasOwnProperty(i)){d.setRequestHeader(i,this.adhocHeaders[i])}}d.withCredentials=true;d.send(c);if(!a){if(0!=d.status){return JSON.parse(d.responseText)}else{var f={code:503,code_message:"Service unavailable",message:b.name};return f}}}catch(b){var f={code:503,code_message:"Service unavailable",message:b.name};if(!a){return f}else{if(null!=j){j(f,f.code,e)}}}};